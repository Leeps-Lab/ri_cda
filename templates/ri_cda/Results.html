{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Results
{% endblock %}

{% block scripts %}
    <script type="module" src="{% static 'ri_cda/results.js' %}"></script>
    <script>
        document.querySelector("#resultId").addEventListener('getPolymerData', function (customEvent) {
            customEvent.preventDefault();
            round_payoff.value = this.payoff;
            $("[id='next_btn']")[0].click();
        });
    </script>
{% endblock %}

{% block content %}
    <results-page
        id="resultId"
        g="{{ g }}"
        k="{{ k }}"
        m="{{ m }}"
        y="{{ y }}"
        cost="{{ player.cost }}"
        available-cash="{{ player.available_cash }}"
        available-assets="{{ available_assets }}"
        default="{{ default }}"
    ></results-page>

    <button id="next_btn" class="otree-btn-next btn btn-primary">Continue</button>
    <input type="hidden" name="round_payoff" id="round_payoff"/>

    {% if form.round_payoff.errors %}
        <h5>Error in getting round payoff</h5>
        {{ form.round_payoff.errors }}
    {% endif %}

{% endblock %}

{% block styles %}
<style>
    .content {
        display: flex;
        justify-content: center;
    }
    #next_btn {
        display: none;
        float: right;
        margin-right: 5%;
    }
</style>

{% endblock %}
